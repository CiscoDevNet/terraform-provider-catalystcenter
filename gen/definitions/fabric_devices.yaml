---
name: Fabric Devices
rest_endpoint: /dna/intent/api/v1/sda/fabricDevices
res_description: Manages Fabric Devices within a single resource, specifying a list of fabric_devices as input
root_list: true
update_computed: true
device_unreachability_warning: true
id_from_attribute: true
doc_category: SDA
mutex: true
import_no_id: true
data_source_no_id: true
test_tags: [SDA]
attributes:
  - tf_name: fabric_id
    mandatory: true
    requires_replace: true
    write_only: true
    id: true
    query_param: true
    delete_query_param: true
    query_param_name: fabricId
    delete_query_param_name: fabricId
    type: String
    description: ID of the fabric this device belongs to
    example: c4b85bb2-ce3f-4db9-a32b-e439a388ac2f
    test_value: catalystcenter_fabric_site.test.id
  - tf_name: fabric_devices
    type: Set
    mandatory: true
    description: List of fabric devices to be managed in bulk
    response_data_path: response
    max_elements_in_root_list: 10
    attributes:
      - model_name: id
        type: String
        computed: true
        computed_refresh_value: true
        description: ID of the fabric device
        exclude_test: true
      - model_name: networkDeviceId
        id: true
        type: String
        mandatory: true
        requires_replace: true
        description: Network device ID of the fabric device
        example: 5e6f7b3a-2b0b-4a7d-8b1c-0d4b1cd5e1b1
      - model_name: fabricId
        type: String
        mandatory: true
        requires_replace: true
        description: ID of the fabric of this fabric device
        example: c4b85bb2-ce3f-4db9-a32b-e439a388ac2f
        test_value: catalystcenter_fabric_site.test.id
      - model_name: deviceRoles
        type: Set
        element_type: String
        mandatory: true
        requires_replace: true
        description: List of the roles of the fabric device. Allowed values are [CONTROL_PLANE_NODE, EDGE_NODE, BORDER_NODE, WIRELESS_CONTROLLER_NODE]
        example: CONTROL_PLANE_NODE
      - model_name: borderTypes
        type: Set
        element_type: String
        description: List of the border types of the fabric device. Allowed values are [LAYER_2, LAYER_3]
        data_path: borderDeviceSettings 
        response_data_path: borderDeviceSettings.borderTypes 
        example: LAYER_3
      - model_name: localAutonomousSystemNumber
        type: String
        description: BGP Local autonomous system number of the fabric border device. Allowed range is [1 to 4294967295].
        data_path: borderDeviceSettings.layer3Settings 
        requires_replace: true
        response_data_path: borderDeviceSettings.layer3Settings.localAutonomousSystemNumber 
        example: "65000"
      - model_name: isDefaultExit
        tf_name: default_exit
        type: Bool
        description: Set this to make the fabric border device the gateway of last resort for this site. Any unknown traffic will be sent to this fabric border device from edge nodes
        data_path: borderDeviceSettings.layer3Settings
        requires_replace: true
        response_data_path: borderDeviceSettings.layer3Settings.isDefaultExit
        example: true
      - model_name: importExternalRoutes
        type: Bool
        description: Set this to import external routes from other routing protocols (such as BGP) to the fabric control plane.
        data_path: borderDeviceSettings.layer3Settings
        requires_replace: true
        response_data_path: borderDeviceSettings.layer3Settings.importExternalRoutes
        example: false
      - model_name: borderPriority
        type: Int64
        min_int: 1
        max_int: 9
        description: Border priority of the fabric border device. Allowed range is [1-9]. A lower value indicates higher priority. E.g., a priority of 1 takes precedence over 5. Default priority would be set to 10.
        data_path: borderDeviceSettings.layer3Settings
        response_data_path: borderDeviceSettings.layer3Settings.borderPriority
        example: 5
      - model_name: prependAutonomousSystemCount
        type: Int64
        min_int: 1
        max_int: 10
        description: Prepend autonomous system count of the fabric border device. Allowed range is [1 to 10].
        data_path: borderDeviceSettings.layer3Settings
        response_data_path: borderDeviceSettings.layer3Settings.prependAutonomousSystemCount
        example: 1
test_prerequisites: |
  resource "catalystcenter_area" "test" {
    name = "Area1"
    parent_name = "Global"
  }
  resource "catalystcenter_fabric_site" "test" {
    site_id = catalystcenter_area.test.id
    pub_sub_enabled = false
    authentication_profile_name = "No Authentication"
    depends_on = [catalystcenter_area.test]
  }